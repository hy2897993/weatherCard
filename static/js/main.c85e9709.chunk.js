(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{108:function(e,t,a){},213:function(e,t,a){"use strict";a.r(t);var n,o=a(0),r=a(8),i=a.n(r),s=(a(108),a(27)),c=a(28),l=a(32),h=a(30),d=a(13),p=a(253),u=a(256),m=a(257),g=a(258),b=a(264),x=a(12),j=a(5),f=a(94),w=a.n(f),v=a(259),y=a(2),O=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).getInput=function(t){e.setState({searchInput:t.target.value})},e.submitSearch=function(){e.state.searchInput.replace(/\s+/g,"")?(e.props.search(e.state.searchInput),console.log(e.state.searchInput)):console.log("input not exist"),e.setState({searchInput:""})},e.submitSearchLocal=function(){e.props.showLocal()},e.handleKeyPress=function(t){if(13===t.keyCode)return console.log("hello"),e.submitSearch(),!1},e.state={searchInput:""},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return Object(y.jsxs)("div",{className:t.root,children:[Object(y.jsx)(p.a,{color:"transparent",children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(m.a,{edge:"start",className:t.menuButton,color:"primary","aria-label":"open drawer"}),Object(y.jsx)(g.a,{className:t.title,variant:"h6",noWrap:!0,children:"How's the weather there"}),Object(y.jsx)(v.a,{onClick:function(t){return e.submitSearchLocal(t)},variant:"contained",color:"primary",value:"Search",className:t.Button,children:"LOCAL"}),Object(y.jsxs)("div",{className:t.search,children:[Object(y.jsx)("div",{className:t.searchIcon,children:Object(y.jsx)(w.a,{className:t.searchIcon})}),Object(y.jsx)(b.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},value:this.state.searchInput,onChange:function(t){return e.getInput(t)},onKeyUp:function(t){return e.handleKeyPress(t)}})]}),Object(y.jsx)(v.a,{onClick:function(t){return e.submitSearch(t)},variant:"contained",color:"primary",value:"Search",className:t.Btn,children:"SEARCH"})]})}),Object(y.jsx)("div",{className:t.navBar,style:{backgroundImage:void 0!==this.props.weather[0]?"".concat(this.props.weather[0].image):"linear-gradient(45deg, #93a5cf 0%, #e4efe9 100%)"},children:Object(y.jsx)("div",{className:t.container,children:void 0!==this.props.weather?this.props.weather.map((function(e,a){return Object(y.jsx)("div",{className:t.cardContainer,style:{backgroundImage:"".concat(e.image)}},a)})):null})})]})}}]),a}(o.Component),C=Object(j.a)((function(e){var t,a,n;return{root:{flexGrow:1,fontFamily:" 'Ubuntu', sans-serif"},navBar:{display:"flex",justifyContent:"space-evenly",flexDirection:"row",alignContent:"flex-start",flexWrap:"wrap",opacity:.5,height:"64px",top:"0px",width:"100%",position:"fixed",filter:"blur(20px) contrast(2)",ZIndex:-1},menuButton:{marginRight:e.spacing(2)},title:Object(d.a)({fontFamily:" 'Ubuntu', sans-serif",flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:(t={position:"relative",borderRadius:e.shape.borderRadius,boxShadow:"inset 0 0 5px #c4c5c8","&:hover":{boxShadow:"inset 0 0 3px #b2b2b2"},backgroundColor:Object(x.b)(e.palette.common.white,.15)},Object(d.a)(t,"&:hover",{backgroundColor:Object(x.b)(e.palette.common.white,.25)}),Object(d.a)(t,"marginLeft",0),Object(d.a)(t,"width","100%"),Object(d.a)(t,e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),Object(d.a)(t,e.breakpoints.up("md"),{marginLeft:e.spacing(1),marginRight:"0",width:"40%"}),t),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(d.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:320,"&:focus":{width:400}}),Btn:(a={height:"30px",width:"40px",left:"10px",backgroundColor:"#6d8fe0"},Object(d.a)(a,e.breakpoints.up("sm"),{width:100}),Object(d.a)(a,e.breakpoints.up("lg"),{width:200}),a),Button:(n={marginRight:"20px",height:"30px",width:"20px",left:"10px",backgroundColor:"#6d8fe0"},Object(d.a)(n,e.breakpoints.up("sm"),{width:100}),Object(d.a)(n,e.breakpoints.up("lg"),{width:200}),n),container:Object(d.a)({display:"flex",justifyContent:"space-evenly",flexDirection:"row",alignContent:"flex-start",flexWrap:"wrap",width:"auto",position:"fixed",top:"0px",left:"0px",right:"0px",height:"64px",overflow:"hidden"},"width","100%"),cardContainer:{margin:"20",order:"1",backgroundSize:"cover",backgroundRepeat:" no-repeat",backgroundPosition:"center",transform:"translateY(-200px) skewX(15deg)",width:"30%",height:"500px",color:"white"}}}))(O),k=a(265),S=a(266),I=a(69),N=a.n(I),D=a(95),T=a.n(D),B=a(70),E=a.n(B),R=a(96),z=a(215),M=a.p+"static/media/icon-bg-4.90459cd9.gif",F=a.p+"static/media/icon-bg-5.bda547f1.gif",L={container:(n={fontFamily:" 'Ubuntu', sans-serif",display:"flex",justifyContent:"space-evenly",flexDirection:"row",alignContent:"flex-start",flexWrap:"wrap",scrollBehavior:"smooth",width:"auto",top:"64px",left:"0px",right:"0px",bottom:"56px",margin:"15px 35px 15px 35px",borderRadius:"70px",boxShadow:"inset  0 0 15px rgba(0, 0, 0, 0.322)",position:"absolute",overflow:"auto",backgroundImage:"url(".concat(M,")"),backgroundSize:"contain",backgroundPosition:"center"},Object(d.a)(n,"scrollBehavior","smooth"),Object(d.a)(n,"scrollbarHeight","8px"),n),cardContainer:{margin:"20px",order:"1",backgroundSize:"cover",backgroundRepeat:" no-repeat",backgroundPosition:"center",height:"500px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white",borderRadius:"50px",boxShadow:" 0 0 15px rgba(0, 0, 0, 0.322)",transition:"background 2s",WebkitTransition:"background 2s",OTransition:"background 2s",MozTransition:"background 2s",background:"linear-gradient(rgb(47,150,163),rgb(48,62,143))"},location:{order:"1",flexDirection:"row",height:"30vh",width:"80%",display:"flex",justifyContent:"space-around",alignItems:"center"},locationTimezone:{textShadow:"0px 0px 5px #707070"},temperature:{order:"2",flexDirection:"column",height:"30vh",width:"80%",display:"flex",justifyContent:"space-around",alignItems:"center"},chartContainer:{order:"3",height:"22vh",width:"80%",background:"linear-gradient(rgba(255, 255, 255, 0.6),rgba(255, 255, 255, 1))",paddingBottom:"20px",margin:"20px"},degreeSection:{height:"10vh",display:"flex",alignItems:"center",cursor:"pointer"},temperatureDescription:{height:"10vh",width:"60%",fontSize:"30px",display:"flex",justifyContent:"space-evenly",flexDirection:"row",textShadow:"0px 0px 5px #707070"},icon:{width:"180px",zIndex:"1",backgroundBlendMode:"luminosity"},btn:{display:"inline-block",color:"#ededed",backgroundColor:"#6d8fe0","&hover":{backgroundColor:"#303f9f"}},canvas:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},button:{backgroundColor:"#6d8fe0","&:hover":{backgroundColor:"#3444a3"},height:"30px",width:"80px",borderRadius:"5px",margin:"20px",textAlign:"center",color:"white"}},A=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).closeChart=function(t){console.log("closeChart"+t),e.props.closeChart(t)},e.changeF=function(t,a){console.log("changeF"+a),e.props.changeF(a)},e.handleClick=function(t,a){console.log(a),e.setState({menuIndex:a,anchorEl:t.target})},e.handleClose=function(t,a){console.log(a),e.setState({anchorEl:null,menuIndex:""})},e.menuHours=function(t){console.log("openchart"+e.state.menuIndex),e.props.showChart(e.state.menuIndex),e.setState({anchorEl:null,menuIndex:""})},e.menuDelete=function(t){console.log("delete"+e.state.menuIndex),e.props.delete(e.state.menuIndex),e.setState({anchorEl:null,menuIndex:""})},e.menuSave=function(t){e.setState({saveMode:!0});var a=document.getElementById("body");console.log(document.getElementById(e.state.menuIndex)),T()(document.getElementById(e.state.menuIndex),{letterRendering:1,allowTaint:!0,useCORS:!0}).then((function(e){a.appendChild(e),e.crossOrigin="anonymous"})).then((function(e){var t=a.getElementsByTagName("canvas");t[0].setAttribute("id","myCanvas"),console.log(t[0]),t[0].style.borderRadius="50px",t[0].style.boxShadow="10px 10px 5px grey"})),e.setState({anchorEl:null,menuIndex:""})},e.tweetCurrentPage=function(){return window.open("https://twitter.com/share?url="+encodeURIComponent(window.location.href)+"&text="+document.title,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600"),!1},e.closeSaveMode=function(){var t=document.getElementById("body"),a=t.getElementsByTagName("canvas");t.removeChild(a[0]),e.setState({saveMode:!1})},e.state={anchorEl:null,saveMode:!1,menuIndex:""},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return Object(y.jsxs)("div",{children:[this.state.saveMode?null:Object(y.jsx)("div",{className:t.container,id:"container",style:{backgroundImage:this.props.loadingStatus?"url(".concat(F,")"):"",WebkitScrollbar:"width(120px) height(20px)"},children:void 0!==this.props.weather?this.props.weather.map((function(a,n){return Object(y.jsxs)("div",{id:n,className:t.cardContainer,style:{background:"url("+"".concat(a.image)+")"},children:[Object(y.jsx)(v.a,{"aria-controls":"simple-menu","aria-haspopup":"true",className:t.btn,onClick:function(t){return e.handleClick(t,n)},children:"Menu"}),Object(y.jsxs)(k.a,{id:"simple-menu",anchorEl:e.state.anchorEl,keepMounted:!0,open:Boolean(e.state.anchorEl),onClose:function(t){return e.handleClose(t)},children:[Object(y.jsx)(S.a,{onClick:function(t){return e.menuHours(t)},children:"Next 24 Hours"}),Object(y.jsx)(S.a,{onClick:function(t){return e.menuSave(t)},children:"Save picture"}),Object(y.jsx)(S.a,{onClick:function(t){return e.menuDelete(t)},children:"Delete"})]}),Object(y.jsxs)("div",{className:t.location,children:[Object(y.jsx)("h1",{className:t.locationTimezone,children:a.locationTimezone}),Object(y.jsx)("div",{className:t.icon,children:Object(y.jsx)(N.a,{color:"white",icon:a.icon,autoplay:!0})})]}),a.showChart?Object(y.jsxs)(z.a,{className:t.chartContainer,children:[Object(y.jsx)(E.a,{style:{right:"80px"},color:"primary",onClick:function(t){return e.closeChart(n)}}),Object(y.jsx)(R.Line,{data:a.chartData,width:80,height:20,options:{maintainAspectRatio:!1}})]}):Object(y.jsxs)("div",{className:t.temperature,children:[Object(y.jsxs)("div",{onClick:function(t){return e.changeF(t,n)},className:t.degreeSection,children:[Object(y.jsx)("h2",{className:"temperature-degree",style:{textShadow:"0px 0px 5px #707070"},children:a.temperatureDegree}),Object(y.jsx)("span",{style:{textShadow:"0px 0px 5px #707070"},children:a.temperatureSpan})]}),Object(y.jsx)("div",{className:t.temperatureDescription,children:a.temperatureDescription})]})]},n)})):null}),Object(y.jsx)("div",{id:"body",className:t.canvas,children:this.state.saveMode?Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(y.jsx)("a",{id:"download",download:"weatherCard.png",onClick:this.download,children:Object(y.jsx)("button",{className:t.button,children:"SAVE"})}),Object(y.jsx)("a",{id:"share","data-pgaction-redirection":"0",onClick:this.share,target:"_blank",alt:"facebook",children:Object(y.jsx)("button",{className:t.button,children:"SHARE"})}),Object(y.jsx)(E.a,{style:{margin:"20px"},color:"primary",onClick:this.closeSaveMode})]}):null})]})}},{key:"download",value:function(){var e=document.getElementById("download"),t=document.getElementById("myCanvas").toDataURL("image/png").replace("image/png","image/octet-stream");e.setAttribute("href",t)}},{key:"share",value:function(){return console.log(document.title),window.open("https://twitter.com/share?url="+encodeURIComponent(window.location.href)+"&text="+document.title,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600"),!1}},{key:"componentDidUpdate",value:function(e){this.props.weatherNum>e.weatherNum&&(document.getElementById("container").scrollTop=5e4,console.log("scroll"))}}]),a}(o.Component),U=Object(j.a)(L)(A),W=a(260),P=a(261),H=a(99),G=a.n(H),_=a(97),Z=a.n(_),K=a(98),Q=a.n(K),q=a(263),J=a(262),X=a(216);console.log("36c85f6d2bmsh173e5aee66c62e3p1053c1jsnc88ce21335a4");var V=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleThumbsOpen=function(){e.setState({thumbsOpen:!0,commentOpen:!1})},e.handleCommentOpen=function(){e.setState({thumbsOpen:!1,commentOpen:!0})},e.handleClose=function(){e.setState({thumbsOpen:!1,commentOpen:!1})},e.handleChange=function(t,a){e.setState({value:a})},e.componentWillMount=function(){e.showLocal()},e.showLocal=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var a=t.coords.longitude,n=t.coords.latitude;e.getToGoogleMap(n,a)})):alert("can't get geolocation")},e.getToGoogleMap=function(t,a){var n="https://google-maps-geocoding.p.rapidapi.com/geocode/json?latlng=".concat(t,"%2C").concat(a,"&language=en");fetch(n,{method:"GET",headers:{"x-rapidapi-key":"36c85f6d2bmsh173e5aee66c62e3p1053c1jsnc88ce21335a4","x-rapidapi-host":"google-maps-geocoding.p.rapidapi.com"}}).then((function(e){return e.json()})).then((function(n){var o=n.plus_code.compound_code,r=o.indexOf(" "),i=o.slice(r,o.length);e.setState({locationTimezone:i,loadingStatus:!0}),e.showWeather(t,a,i)}))},e.search=function(t){e.getGeo(t)},e.getGeo=function(t){var a=t.replace(/\s+/g,"+"),n="https://maps.googleapis.com/maps/api/geocode/json?address=".concat(a,"&key=").concat("AIzaSyAX-Z2ZStqtQy4w1mQmoHZUT1lOj7Qdsb0");fetch(n).then((function(e){return e.json()})).then((function(t){if(t.results[0]){var a=t.results[0].geometry.location,n=a.lat,o=a.lng,r=t.results[0].formatted_address;e.showWeather(n,o,r),e.setState({locationTimezone:r,loadingStatus:!0})}else alert("Cannot find location, please try again.")}))},e.showWeather=function(t,a,n){var o,r=new Date,i=[];for(o=0;o<24;o++){var s=o+r.getHours();if(r.getMinutes()<15)var c="00";else if(r.getMinutes()>=15&&r.getMinutes()<45)c="30";else if(r.getMinutes()>=45){c="00";s+=1}if(s>=24?s-=24:s=s,s<10)var l="0"+s.toString();else l=s.toString();i[o]=Number(l)+":"+Number(c)}var h="https://dark-sky.p.rapidapi.com/".concat(t,",").concat(a,"?lang=en&units=auto");fetch(h,{method:"GET",headers:{"x-rapidapi-key":"36c85f6d2bmsh173e5aee66c62e3p1053c1jsnc88ce21335a4","x-rapidapi-host":"dark-sky.p.rapidapi.com"}}).then((function(e){return e.json()})).then((function(t){var a,o=t.currently,r=o.temperature,s=o.summary,c=o.icon,l=[];for(a=0;a<24;a++)l[a]=t.hourly.data[a].temperature;var h=n.indexOf(","),d=n.slice(0,h);e.setIcon(c),e.getImg(d+" city"),e.setState({temperatureDegree:r,temperatureDescription:s,temperatureSpan:"\xb0F",chartData:{labels:i,datasets:[{label:"Temperature",data:l,backgroundColor:["rgba(54, 162, 235, 0.2)"],borderColor:["rgba(255, 99, 132, 1)"]}]}})}))},e.setIcon=function(t){var a=t.replace(/-/g,"_").toUpperCase();e.setState({icon:a})},e.getImg=function(t){var a="https://contextualwebsearch-websearch-v1.p.rapidapi.com/api/Search/ImageSearchAPI?q=".concat(t,"%20city%20birdview&pageNumber=1&pageSize=").concat(10,"&autoCorrect=true");fetch(a,{method:"GET",headers:{"x-rapidapi-key":"36c85f6d2bmsh173e5aee66c62e3p1053c1jsnc88ce21335a4","x-rapidapi-host":"contextualwebsearch-websearch-v1.p.rapidapi.com"}}).then((function(e){return e.json()})).then((function(t){var a=Math.floor(10*Math.random()),n=void 0!==t.value?t.value[a].url:null;e.setState({image:n});var o=e.state.weather,r=o.length+1;o.push({locationTimezone:e.state.locationTimezone,image:e.state.image,temperatureDegree:e.state.temperatureDegree,temperatureDescription:e.state.temperatureDescription,temperatureSpan:e.state.temperatureSpan,icon:e.state.icon,chartData:e.state.chartData,showChart:!1}),e.setState({weather:o,loadingStatus:!1,weatherNum:r})}))},e.changeF=function(t){var a=e.state.weather[t].temperatureDegree;if("\xb0F"===e.state.weather[t].temperatureSpan){var n=5/9*(a-32),o=e.state.weather;o[t].temperatureDegree=+n.toFixed(2),o[t].temperatureSpan="\xb0C",e.setState({weather:o})}else{var r=32+1.8*a,i=e.state.weather;i[t].temperatureDegree=+r.toFixed(2),i[t].temperatureSpan="\xb0F",e.setState({weather:i})}},e.delete=function(t){var a=e.state.weather,n=e.state.weatherNum-1;a.splice(t,1),e.setState({weather:a,weatherNum:n})},e.save=function(e){},e.closeChart=function(t){var a=e.state.weather;a[t].showChart=!1,e.setState({weather:a})},e.showChart=function(t){var a=e.state.weather;a[t].showChart=!0,e.setState({weather:a})},e.state={weather:[],locationTimezone:"",image:"",temperatureDegree:"",temperatureDescription:"",temperatureSpan:"\xb0F",icon:"",value:"",commentOpen:!1,thumbsOpen:!1,chartData:"",loadingStatus:!1,weatherNum:0},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(y.jsxs)("div",{children:[Object(y.jsx)(C,{search:this.search,showLocal:this.showLocal,weather:this.state.weather}),Object(y.jsx)(U,{weather:this.state.weather,delete:this.delete,save:this.save,locationTimezone:this.state.locationTimezone,image:this.state.image,temperatureDegree:this.state.temperatureDegree,temperatureDescription:this.state.temperatureDescription,temperatureSpan:this.state.temperatureSpan,changeF:this.changeF,closeChart:this.closeChart,showChart:this.showChart,loadingStatus:this.state.loadingStatus,weatherNum:this.state.weatherNum}),Object(y.jsx)("div",{className:e.footer,color:"primary",children:Object(y.jsxs)(W.a,{value:this.state.value,onChange:this.handleChange,className:e.root,children:[Object(y.jsx)(P.a,{className:e.navIcon,color:"primary",onClick:this.handleThumbsOpen,label:"Thumbs Up!",value:"Thumbs",icon:Object(y.jsx)(Z.a,{})}),Object(y.jsx)(P.a,{className:e.navIcon,onClick:this.handleCommentOpen,label:"Leave Comment",value:"Comment",icon:Object(y.jsx)(Q.a,{})}),Object(y.jsx)(P.a,{className:e.navIcon,href:"mailto:huangying0528@gmail.com?Subject=Hello--%20from%20weather%20App%20user",label:"Send Email",value:"Email",icon:Object(y.jsx)(G.a,{})})]})}),Object(y.jsx)(q.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:this.state.thumbsOpen,onClose:this.handleClose,closeAfterTransition:!0,BackdropComponent:J.a,BackdropProps:{timeout:500},children:Object(y.jsx)(X.a,{in:this.state.thumbsOpen,children:Object(y.jsxs)("div",{className:e.paper,children:[Object(y.jsx)("h2",{className:e.title,id:"transition-modal-title",children:"Thank you!"}),Object(y.jsx)("p",{className:e.content,id:"transition-modal-description"})]})})}),Object(y.jsx)(q.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:this.state.commentOpen,onClose:this.handleClose,closeAfterTransition:!0,BackdropComponent:J.a,BackdropProps:{timeout:500},children:Object(y.jsx)(X.a,{in:this.state.commentOpen,children:Object(y.jsxs)("div",{className:e.paper,children:[Object(y.jsx)("h2",{className:e.title,id:"transition-modal-title",children:"Leave your comment here:"}),Object(y.jsx)("textarea",{className:e.textarea,rows:"2",cols:"24"}),Object(y.jsx)(v.a,{onClick:this.handleClose,color:"primary",children:"Submit"})]})})})]})}}]),a}(o.Component),Y=Object(j.a)({root:{fontFamily:" 'Ubuntu', sans-serif",height:"56px",position:"absolute",bottom:"0px",width:"100%"},navIcon:{fontFamily:" 'Ubuntu', sans-serif"},modal:{display:"flex",alignItems:"center",justifyContent:"center",color:"grey"},paper:{backgroundColor:"white",borderRadius:"20px",height:200,width:400,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},title:{color:"black",display:"inline-block"},content:{color:"black",display:"inline-block"},textarea:{borderRadius:"20px",padding:"20px"}})(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(y.jsx)(Y,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[213,1,2]]]);
//# sourceMappingURL=main.c85e9709.chunk.js.map